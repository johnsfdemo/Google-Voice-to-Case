# Google Voice to Case

This package contains an invocable Apex class and a sample Salesforce Process Builder process to parse an incoming email-to-case record that was generated by leaving a Google Voice message and then forwarding the transcribed voice message to Salesforce.


## Installation and Setup

### Step 1

[set up a free Google Voice account](https://support.google.com/voice/answer/7207482?hl=en&ref_topic=1707989). You will also get a Gmail address related to this account. Make a note of this Gmail address as you will be using it in your Salesforce email-to-case setup.

### Step 2

Set up email-to-case in Salesforce. The easiest way to do this is to select the **Service Setup** menu item from the gear icon in the upper right-hand corner of the Salesforce page and stepping through the **Email Setup** wizard. On the first page of the wizard, enter the Gmail address you got in **Step 1**:

![Email-to-Case Wizard](/images/Email_to_Case_Dialog.png)

Finish all the steps in the wizard and your email-to-case should be ready to go. Make sure you test this setup before proceeding further.

### Step 3

Go back to your `voice.google.com` page and click the Settings (gear) icon in the upper right-hand-corner. Select the option to forward your messages to the Gmail address:

![Forward Messages](/images/Forward_Messages.png)

Then select the **Do not disturb** option. This will automatically make any voice call go directly to voicemail:

![Do Not Disturb](/images/Do_Not_Disturb.png)

### Step 4

Deploy this package to your Salesforce org using the button below.

### Step 5

You are now ready to include the contents of this package in your Process Builder processes and Flow Builder flows. Simply call the `Process Google Voicemail` Apex action and pass in the record ID of the current case. I include a sample Process Builder process called `Sample Google Voice Process` (inactive by default) that includes the action. You may use it, modify it, or simply use it as a reference for your own processes and flows:

![Process Google Voicemail Action](/images/Process_Google_Voicemail.png)

If you are using `Process Google Voicemail` in a screen flow, you can check the return values as well: `status` will be set to either `SUCCESS` or `FAILURE`, and in the case of the latter, `message` will include a more detailed error message.

### Step 6

Add the Google Voice number from **Step 1** to your mobile phone's address book and dress it up for the demo by adding a logo and using the name of your customer as the contact. Then, go into your Salesforce org and select the record of the contact you wish to use as the initiator of the case in your demo. Add your own mobile phone number to any of the standard phone fields (`Phone`, `MobilePhone`, `HomePhone`, or `OtherPhone`). Make sure you enter your mobile phone number in the form `(###) ###-####` or this package will not find it.


## How to Deploy This Package to Your Org

I am a pre-sales Solutions Engineer for [Salesforce](https://www.salesforce.com) and I develop solutions for my customers to demonstrate the capabilities of the amazing Salesforce platform. *This package represents functionality that I have used for demonstration purposes  and the content herein is definitely not ready for actual production use; specifically, it has not been tested extensively nor has it been written with security and access controls in mind. By installing this package, you assume all risk for any consequences and agree not to hold me or my company liable.*  If you are OK with that ...

Simply click the button below and log into your org:

<a href="https://githubsfdeploy.herokuapp.com">
  <img alt="Deploy to Salesforce"
       src="https://raw.githubusercontent.com/afawcett/githubsfdeploy/master/src/main/webapp/resources/img/deploy.png">
</a>
